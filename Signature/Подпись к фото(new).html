<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏</title>
        <style>
            * {
                box-sizing: border-box;
            }
            body {
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                background-color: #f0f0f0;
                color: #333;
            }
            .container {
                min-height: 100vh;
                padding: 20px;
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            h1 {
                color: #ff6600;
                text-align: center;
            }
            textarea {
                width: 100%;
                height: 150px;
                padding: 10px;
                font-size: 16px;
                border-radius: 10px;
                border: 1px solid #ccc;
            }
            .section {
                margin-bottom: 20px;
            }
            .label {
                font-weight: bold;
                margin-bottom: 8px;
                display: block;
            }
            .options {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            .option-btn {
                background-color: #ff6600;
                color: #fff;
                padding: 10px 20px;
                border: none;
                border-radius: 8px;
                font-size: 16px;
                cursor: pointer;
                transition: background 0.3s;
            }
            .option-btn.active {
                background-color: #333;
            }
            input[type='date'] {
                padding: 10px;
                font-size: 16px;
                border-radius: 8px;
                border: 1px solid #ccc;
            }
            .submit-btn {
                margin-top: auto;
                padding: 15px;
                font-size: 18px;
                background-color: #ff6600;
                color: #fff;
                border: none;
                border-radius: 10px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <!-- <h1>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏</h1> -->

            <textarea
                id="userText"
                placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—Å—Ç..."></textarea>

            <div class="section">
                <label class="label">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:</label>
                <input style="width: 100%" type="date" id="datePicker" />
            </div>

            <div class="section">
                <label class="label">–õ–æ–∫–∞—Ü–∏—è:</label>
                <div class="options" id="locationOptions"></div>
            </div>

            <div class="section">
                <label class="label">–ü—Ä–∞–∑–¥–Ω–∏–∫–∏:</label>
                <div class="options" id="holidayOptions"></div>
            </div>

            <div class="section">
                <label class="label">–°–æ–±—ã—Ç–∏—è:</label>
                <div class="options" id="eventOptions"></div>
            </div>

            <div class="section">
                <label class="label">–õ–∏—á–Ω–æ—Å—Ç—å:</label>
                <div class="options" id="personOptions"></div>
            </div>

            <button class="submit-btn" onclick="submitForm()">
                –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–π—Ç–∏
            </button>
        </div>

        <script>
            const locations = [
                '–ü—Å–∫–æ–≤',
                '–û–ø–æ—á–∫–∞',
                '–ú–æ—Å–∫–≤–∞',
                '–ú–∏–Ω—Å–∫',
                '–ë–µ–ª–æ—Ä—É—Å—Å–∏—è',
                '–°–ü–ë',
            ];
            const holidays = [
                '–ù–æ–≤—ã–π –≥–æ–¥',
                '–†–æ–∂–¥–µ—Å—Ç–≤–æ',
                '23 —Ñ–µ–≤—Ä–∞–ª—è',
                '8 –ú–∞—Ä—Ç–∞',
                '–ü–∞—Å—Ö–∞',
                '–î–µ–Ω—å —Ç—Ä—É–¥–∞',
                '–î–µ–Ω—å –ø–æ–±–µ–¥—ã',
                '–î–µ–Ω—å –∑–Ω–∞–Ω–∏–π',
                '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è',
            ];
            const events = [
                '–¢—Ä–∞–¥–∏—Ü–∏–∏',
                '–£—Ç—Ä–µ–Ω–Ω–∏–∫',
                '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ',
                '–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ',
                '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è',
                '–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è',
                '–§—É—Ç–±–æ–ª',
                '–î–∑—é–¥–æ',
                '–ì–∏–º–Ω–∞—Å—Ç–∏–∫–∞',
                '–®–∫–æ–ª–∞',
                '–ü—Ä–æ–≥—É–ª–∫–∞',
                '–ü–æ–∫–∞—Ç—É—à–∫–∏',
            ];
            const persons = [
                '–ù–∏–∫–æ–ª–∞–π',
                '–†–∞–∏—Å–∞',
                '–¢–∞—Ç—å—è–Ω–∞',
                '–ü–∞–≤–µ–ª',
                '–ò—Ä–∏–Ω–∞',
                '–¢–∏–º–æ—à–∞',
                '–ú–∞—Ç–≤–µ–π',
                '–°–æ–Ω—è',
            ];

            const selected = {
                location: [],
                holiday: [],
                event: [],
                person: []
            };

            function createOptionButtons(containerId, options, key) {
                const container = document.getElementById(containerId);
                options.forEach((option) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = option;
                    btn.onclick = () => {
                        const isSelected = selected[key].includes(option);
                        if (isSelected) {
                            selected[key] = selected[key].filter(
                                (item) => item !== option
                            );
                            btn.classList.remove('active');
                        } else {
                            selected[key].push(option);
                            btn.classList.add('active');
                        }
                    };
                    container.appendChild(btn);
                });
            }

            function getSeason(date) {
                const month = date.getMonth() + 1;
                if ([12, 1, 2].includes(month)) return '–ó–∏–º–∞';
                if ([3, 4, 5].includes(month)) return '–í–µ—Å–Ω–∞';
                if ([6, 7, 8].includes(month)) return '–õ–µ—Ç–æ';
                return '–û—Å–µ–Ω—å';
            }

            function formatDateVerbose(date) {
              return date.toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
              });
            }
          
            function submitForm() {
              const text = document.getElementById('userText').value.trim();
              const dateInput = document.getElementById('datePicker').value;
            
              let output = '';
              if (text) {
                output += text + '\n';
              }
            
              let seasonTag = '';
              if (dateInput) {
                const date = new Date(dateInput);
                output += formatDateVerbose(date) + '\n';
            
                // –¥–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è –≥–æ–¥–∞
                const season = getSeason(date);
                seasonTag = `#${season.replace(/\s+/g, '')}`;
              }
            
              // —Å–æ–±–∏—Ä–∞–µ–º —Ö–µ—à—Ç–µ–≥–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π + —Å–µ–∑–æ–Ω
              const hashtags = [
                ...Object.values(selected).flat().map(tag => `#${tag.replace(/\s+/g, '')}`),
                seasonTag
              ]
                .filter(Boolean)
                .join(' ');
            
              if (hashtags) {
                output += `\n${hashtags}`;
              }
            
              console.log('üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ:', output);
              if (output) {
                navigator.clipboard.writeText(output);
                window.location.href = 'https://t.me/c/2231008379/2/999999999';
              } else {
                alert('–ù–µ—á–µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç, –¥–∞—Ç—É –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—É–Ω–∫—Ç.');
              }
            }

            createOptionButtons('locationOptions', locations, 'location');
            createOptionButtons('holidayOptions', holidays, 'holiday');
            createOptionButtons('eventOptions', events, 'event');
            createOptionButtons('personOptions', persons, 'person');
        </script>
    </body>
</html>
